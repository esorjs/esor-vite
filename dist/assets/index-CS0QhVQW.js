(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const Ve="/vite.svg",qe="/esor.svg";var G=Object.defineProperty,Y=e=>{throw TypeError(e)},Ue=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a=(e,t)=>G(e,"name",{value:t,configurable:!0}),ze=(e,t,r)=>Ue(e,t+"",r),Z=(e,t,r)=>t.has(e)||Y("Cannot "+r),m=(e,t,r)=>(Z(e,t,"read from private field"),r?r.call(e):t.get(e)),Q=(e,t,r)=>t.has(e)?Y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Je=(e,t,r)=>(Z(e,t,"access private method"),r),h,L,ee,k=class te{constructor(){Q(this,L),Q(this,h,new Map),te.current=this}add(t,r){return Je(this,L,ee).call(this,t).add(r),()=>{var n;return(n=m(this,h).get(t))==null?void 0:n.delete(r)}}run(t,r){var n;(n=m(this,h).get(t))==null||n.forEach(o=>{try{o.call(r)}catch(i){r._catchError(i)}})}clear(t){t?m(this,h).delete(t):m(this,h).clear()}};h=new WeakMap,L=new WeakSet,ee=a(function(e){return m(this,h).has(e)||m(this,h).set(e,new Set),m(this,h).get(e)},"#hooks"),a(k,"Lifecycle"),ze(k,"current");var re=k,Ke=a(()=>re.current||(()=>{throw"Lifecycle not initialized"})(),"getLC");a(e=>{let t=e();return t instanceof Function&&Ke().add("destroy",t)||(()=>{})},"onEffect");var S={currentEffect:null,currentComponent:null,pendingEffects:new Set,isEffectsFlushing:!1,globalEvents:{handlersByType:new Map,nextId:0}},d=S;function D(e,t){let r=S.currentComponent;S.currentComponent=e;try{return t()}finally{S.currentComponent=r}}a(D,"withCurrentComponent");function P(e,t){return!Object.is(e,t)}a(P,"valuesChanged");var Xe=a(e=>{var t;return e instanceof DocumentFragment&&e||((t=e==null?void 0:e.content)==null?void 0:t.cloneNode())||document.createDocumentFragment()},"getDocumentFragment");function ne(e,t){let r=e.nextSibling;for(;r&&r!==t;){let n=r.nextSibling;r.parentNode.removeChild(r),r=n}}a(ne,"removeChildNodesBetween");var oe=a((e,t)=>{let r=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),[n,o]=[null,null];for(;r.nextNode()&&!o;){let i=r.currentNode;!n&&i.nodeValue===t?n=i:n&&i.nodeValue===`//${t}`&&(o=i)}return[n,o]},"findCommentPlaceholders");function ie(e){let t=HTMLElement.prototype.hasOwnProperty("attachInternals")?e.attachInternals():null;t!=null&&t.shadowRoot?e.shadowRoot=t.shadowRoot:e.attachShadow({mode:"open"})}a(ie,"setupDeclarativeShadowRoot");var Qe=["map","filter","find","findIndex","slice","concat","reduce","every","some","includes","push","pop","shift","unshift","splice","reverse","sort"];function ae(e,t){for(let r of Qe){let n=e[r];e[r]=(...o)=>{let i=n.apply(e,o);return i instanceof Array&&(i.__signalArray=!0,i.__signal=t,i.__mapFn=o[0]),i}}return e}a(ae,"addSignalMap");function V(){d.isEffectsFlushing||(d.isEffectsFlushing=!0,Promise.resolve().then(()=>{let e=new Set(d.pendingEffects);d.pendingEffects.clear(),e.forEach(t=>t()),d.isEffectsFlushing=!1}))}a(V,"flushEffects");function E(e){let t=a(()=>{let r=d.currentEffect;d.currentEffect=t;try{return e()}finally{d.currentEffect=r}},"effect");return t(),t}a(E,"useEffect");var w=0,A=new Set;function y(e){let t=new Set,r=e,n=a(()=>(d.currentEffect&&t.add(d.currentEffect),Array.isArray(r)?ae(r,n):r),"read"),o=a(i=>{if(P(r,i)){if(r=i,w>0){t.forEach(l=>A.add(l));return}queueMicrotask(()=>{for(let l of t)typeof l=="function"&&d.pendingEffects.add(l);V()})}},"write");return n.valueOf=()=>n(),n.toString=()=>String(n()),n.signal=!0,n.cleanup=()=>{t.clear(),r=e},[n,o]}a(y,"useSignal");function Ge(e){let[t,r]=y(e());return E(()=>{let n=e();P(t(),n)&&queueMicrotask(()=>r(n))}),t}a(Ge,"useComputed");function Ye(e){w++;try{return e()}finally{if(w--,w===0&&A.size){for(let t of A)d.pendingEffects.add(t);A.clear(),V()}}}a(Ye,"useBatch");var q=a(e=>e==null?"":e.toString().replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","/":"&#x2F;"})[t]),"escapeHTML");function le(e){return e==null?"":String(e).replace(/^["']|["']$/g,"").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}a(le,"cleanAttributeValue");function U(e,t,r,n,o){r=[...r||[]],n=[...n||[]];let i=t.parentNode,l=se(e,t),s=fe(n,l,r);he(i,l,s,t),x(o,e,t),e.__oldItems=[...n]}a(U,"reconcileArrays");function se(e,t){let r=[],n=e.nextSibling;for(;n&&n!==t;)r.push(n),n=n.nextSibling;return r}a(se,"collectNodes");function g(e){return e&&e.nodeType===Node.ELEMENT_NODE}a(g,"isValidDOMNode");function ue(e){return g(e)?e.getAttribute("data-key"):null}a(ue,"getNodeKey");function ce(e,t,r,n){if(!e||!t||!r||!n)return!1;if(r.template&&n.template){let o=I(e),i=I(t),l=!1;return o.forEach((s,c)=>{let u=i[c];u&&s.textContent!==u.textContent&&(s.textContent=u.textContent,l=!0)}),l}return!1}a(ce,"updateNodeContent");function I(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n;for(;n=r.nextNode();)t.push(n);return t}a(I,"getTextNodes");function fe(e,t,r){let n=new Map,o=new Map;return t.forEach(i=>{let l=ue(i);l&&n.set(l,i)}),r.forEach((i,l)=>{let s=B(i,l);o.set(s,i)}),e.map((i,l)=>{let s=B(i,l),c=n.get(s),u=o.get(s);if(c&&g(c)){if(de(u,i)){let f=j(i,s);return ce(c,f,u,i)?c:(pe(c,f),f)}return c}return j(i,s)})}a(fe,"createOrReuseNodes");function de(e,t){if(!e||!t)return!0;if(e!=null&&e.template&&(t!=null&&t.template)){let r=R(e),n=R(t);return!v(r,n)}return!v(e,t)}a(de,"hasChanged");function R(e){if(!(e!=null&&e.template))return null;let t=[],r=e.template.cloneNode(!0),n=document.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);for(;n.nextNode();){let o=n.currentNode;o.nodeType===Node.TEXT_NODE&&o.textContent.trim()?t.push(o.textContent):o.nodeType===Node.ELEMENT_NODE&&Array.from(o.attributes).forEach(i=>{i.value.includes("${")&&t.push(i.value)})}return t}a(R,"extractDynamicValues");function v(e,t){if(e===t)return!0;if(!e||!t||typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,n)=>v(r,t[n]));if(typeof e=="object"){let r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>v(e[o],t[o]))}return String(e)===String(t)}a(v,"areValuesEqual");function pe(e,t){!g(e)||!g(t)||Array.from(e.attributes).forEach(r=>{r.name.startsWith("data-event-")&&t.setAttribute(r.name,r.value)})}a(pe,"copyEventAttributes");function B(e,t){if(e!=null&&e.template){let r=e.template.firstElementChild;if(e.id)return`item-${e.id}`;if(r&&g(r)){let n=r.getAttribute("key");if(n)return n}return`template-${t}`}if(e&&typeof e=="object"){if(e.id)return`item-${e.id}`;try{return`item-${t}-${JSON.stringify(e)}`}catch{return`item-${t}`}}return`item-${t}-${String(e)}`}a(B,"getItemKey");function j(e,t){let r;return e!=null&&e.template?r=e.template.cloneNode(!0).firstElementChild||document.createElement("div"):(r=document.createElement("div"),r.textContent=String(e)),g(r)&&r.setAttribute("data-key",t),r}a(j,"createNode");function he(e,t,r,n){let o=0,i=t.length,l=0,s=r.length,c=i>0&&t[i-1].nextSibling||n,u=null;if(i===0){for(let f=0;f<s;f++)e.insertBefore(r[f],c);return}if(s===0){for(;o<i;)e.removeChild(t[o++]);return}for(;o<i||l<s;){if(t[o]===r[l]){o++,l++;continue}for(;t[i-1]===r[s-1];)i--,s--;if(o===i){let f=s<r.length?l?r[l-1].nextSibling:r[s-l]:c;for(;l<s;)e.insertBefore(r[l++],f)}else if(l===s)for(;o<i;)(!u||!u.has(t[o]))&&e.removeChild(t[o]),o++;else if(t[o]===r[s-1]&&r[l]===t[i-1]){let f=t[--i].nextSibling;e.insertBefore(r[l++],t[o++].nextSibling),e.insertBefore(r[--s],f),t[i]=r[s]}else{if(!u){u=new Map;for(let p=l;p<s;p++)u.set(r[p],p)}let f=u.get(t[o]);if(f==null)e.removeChild(t[o++]);else if(l<f&&f<s){let p=1;for(;o+p<i&&f+p<s&&t[o+p]===r[f+p];)p++;if(p>f-l){let T=t[o];for(;l<f;)e.insertBefore(r[l++],T)}else e.replaceChild(r[l++],t[o++])}else o++}}}a(he,"ddiff");function _(e,t,r){let n=E(()=>{if(!e._isUpdating){e._isUpdating=!0;try{r(t())}finally{e._isUpdating=!1}}});e._cleanup.add(n)}a(_,"bindSignalToElement");function x(e,t,r){let{shadowRoot:n}=e,o=me(n,t,r);ge(e,o)}a(x,"bindEventsInRange");function me(e,t,r){let n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);if(!t&&!r)for(;o.nextNode();)n.push(o.currentNode);else{let i=(t==null?void 0:t.nextSibling)||e.firstChild;if(!i)return n;o.currentNode=i;do{if(o.currentNode===r)break;n.push(o.currentNode)}while(o.nextNode())}return n}a(me,"getElementsInRange");function ge(e,t){var r;for(let n of t)for(let o of Array.from(n.attributes)){if(!o.name.startsWith("data-event-"))continue;let i=o.name.replace("data-event-",""),l=parseInt(o.value,10),s=(r=d.globalEvents.handlersByType.get(i))==null?void 0:r.get(l);typeof s=="function"&&(n.addEventListener(i,(...c)=>D(e,()=>s.call(e,...c))),n.removeAttribute(o.name))}}a(ge,"bindEvents");function ye(e,t){t&&t.forEach(({type:r,signal:n,bindAttr:o,attributeName:i})=>{if(r==="attribute"){let l=e.shadowRoot.querySelector(`[${o}]`);if(!l)return;l.removeAttribute(o),_(e,n,s=>{let c=String(s);l.getAttribute(i)!==c&&l.setAttribute(i,c)})}else if(r==="array"){let[l,s]=oe(e.shadowRoot,o);if(!l||!s)return;_(e,n,c=>{let u=l.__oldItems||[];U(l,s,u,Array.isArray(c)?c:[],e)})}else(r==="text"||r==="expression")&&Oe({host:e,type:r,signal:n,bindAttr:o})})}a(ye,"setupSignals");function ve(e,t){if(t)for(let[r,n]of t.entries()){let o=e.shadowRoot.querySelector(`[data-ref-${r}]`);o&&(o.removeAttribute(`data-ref-${r}`),n(o))}}a(ve,"setupRefs");var M={info:{color:"#0066cc",icon:"â„¹ï¸"},warn:{color:"#FFA500",icon:"âš ï¸"},error:{color:"#FF0000",icon:"ðŸš«"}},z=a((e="info",t="",...r)=>{var n,o;M[e]||(e="info"),console.groupCollapsed(`%c[ESOR ${M[e].icon}${Ze(e)}] ${t}`,`color: ${M[e].color}; font-weight: bold;`),console[e]({message:t,component:((o=(n=d.currentComponent)==null?void 0:n.constructor)==null?void 0:o.name)||"Unknown",time:new Date().toISOString(),data:r.length?r:void 0}),console[e==="error"?"trace":"debug"](),console.groupEnd()},"log"),Ze=a(e=>e?e.charAt(0).toUpperCase()+e.slice(1):"","capitalize");a((...e)=>z("info",...e),"info");a((...e)=>z("warn",...e),"warn");var N=a((...e)=>z("error",...e),"error"),C=new Map;function be(e,t){if(!e||typeof t!="function")return N("Invalid event registration parameters"),-1;let r=C.get(e);r||(r=new Map,C.set(e,r));let n=d.globalEvents.handlersByType.get(e);n||(n=new Map,d.globalEvents.handlersByType.set(e,n));let o=d.globalEvents.nextId++,i=d.currentComponent;return i&&i._eventIds.push({type:e,id:o}),n.set(o,t),r.set(o,t),o}a(be,"registerEvent");function et(e,t){let r=d.globalEvents.handlersByType.get(e);if(r){r.delete(t),r.size===0&&d.globalEvents.handlersByType.delete(e);let n=C.get(e);n&&(n.delete(t),n.size===0&&C.delete(e))}}a(et,"clearEventHandler");function tt(e,t){let r=d.currentComponent;if(!r)return N("useEmit must be used within a component"),null;let n=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n.__esor={name:e,detail:t,receivedBy:[],timestamp:Date.now()},r.dispatchEvent(n),n}a(tt,"useEmit");var rt=/\s(\w[\w-]*)=(["'])?(?:(?!\2).)*$/,Ee=/ref=(["'])?\s*$/,Ne=/(@\w+)=(["'])?\s*$/,nt=/(["'])\s*$/,ot=/^(script|style|textarea|title)$/i,it=a(e=>e.replace(nt,""),"trimQuote"),J=a(e=>e.charAt(e.length-1)==='"'?'"':"'","getQuote"),$=a(e=>e&&typeof e=="object"&&e.template,"isTemplateObject");function Se(e,t,r,n){let o=J(t);return n.set(r,e),t.replace(Ee,`data-ref-${r}=${o}true${o}`)}a(Se,"injectRef");function we(e,t,r){let n=J(r),o=be(t,e);return e.isEventHandler=!0,r.replace(Ne,`data-event-${t}=${n}${o}${n}`)}a(we,"injectEvent");function Ae(e,t,r,n,o){r=it(r);let i=J(r),l=typeof e=="function"?e():e,s=ot.test(t)?String(l):q(l),c=`data-bind-${n}`;return r+=`${s} '' ${c}=${i}true${i}`,o.set(n,{type:"attribute",signal:e,attributeName:t,bindAttr:c}),r}a(Ae,"injectSignalAttr");function H(e,t,r,n,o){let i=`data-expr-${n}`;o.set(n,{type:t?"expression":"text",signal:e,bindAttr:i});let l=t?e():e;return`${r}<!--${i}-->${q(String(l))}<!--//${i}-->`}a(H,"injectExpr");function W(e,t,r,n,o,i){let l=`data-expr-${t}`,s={type:"array",signal:o?()=>(e.__signal()||[]).map(e.__mapFn||(u=>u)):typeof i=="function"?i:()=>e,bindAttr:l};r.set(t,s);let c=(Array.isArray(e)?e:[]).map(b).join("");return`${n}<!--${l}-->${c}<!--//${l}-->`}a(W,"injectArray");function b(e){return e==null||e===!1?"":Array.isArray(e)?e.reduce((t,r)=>t+b(r),""):$(e)?[...e.template.childNodes].reduce((t,r)=>(r.nodeType===1&&r.hasAttribute("key")&&(r.setAttribute("data-key",r.getAttribute("key")),r.removeAttribute("key")),t+(r.outerHTML||r.textContent)),""):(e==null?void 0:e.type)==="template-array"?e.templates.reduce((t,r)=>t+b(r),""):q(String(e))}a(b,"processVal");function $e(e,...t){let r="",n=new Map,o=new Map,i=0,l=0;for(let c=0;c<e.length;c++)if(r+=e[c],c<t.length){let u=t[c],f=e[c].match(rt),p=!!f,T=f==null?void 0:f[1],He=r.match(Ee),O=r.match(Ne),We=He&&typeof u=="function",De=O&&typeof u=="function",Pe=O?O[1].slice(1):null;We?r=Se(u,r,l++,o):De?r=we(u,Pe,r):(u!=null&&u.signal||typeof u=="function")&&p?r=Ae(u,T,r,i++,n):Array.isArray(u)&&u.__signalArray===!0?r=W(u,i++,n,r,!0):u!=null&&u.signal?r=H(u,!1,r,i++,n):typeof u=="function"?r=H(u,!0,r,i++,n):Array.isArray(u)?r=W(u,i++,n,r,!1,u):u!=null&&(r+=b(u))}let s=document.createElement("template");return s.innerHTML=r.trim(),{template:s.content,signals:n,refs:o}}a($e,"processTemplate");function _e(e){try{return e()??null}catch{return null}}a(_e,"evalExpr");function Ce(e,...t){return $e(e,...t)}a(Ce,"html");var F=new Map;function xe(e,t){let r=Xe(t);return F.has(e)||F.set(e,r.cloneNode(!0)),F.get(e).cloneNode(!0)}a(xe,"cachedTemplate");function Te(e,{signal:t,bindAttr:r,renderer:n}){let[o,i]=oe(e.shadowRoot,r);!o||!i||_(e,t,l=>n(o,i,l))}a(Te,"bindPlaceholderSignal");function Oe({host:e,type:t,signal:r,bindAttr:n}){Te(e,{signal:r,bindAttr:n,renderer:a((o,i,l)=>{let s=t==="expression"?_e(()=>l):l;s!=null&&Me(e,o,i,s)},"renderer")})}a(Oe,"handleSignalBinding");function Me(e,t,r,n){if(Array.isArray(n)&&n.some($)){U(t,r,t.__oldItems||[],n,e);return}let o=$(n)?n.template.cloneNode(!0).firstElementChild:document.createTextNode(String(n));ne(t,r),o&&(r.parentNode.insertBefore(o,r),$(n)&&x(e,t,r))}a(Me,"renderEvaluated");var Fe=a(e=>e&&!/^(data-|@|ref|key$)/.test(e)&&/^[a-z][\w\-_:]*$/i.test(e),"specialAttr");function K(e){if(typeof e!="string")return e;let t=e.trim();if(!t)return t;let r=t.toLowerCase(),n={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};if(r in n)return n[r];let o=Number(t);if(!Number.isNaN(o))return o;try{return JSON.parse(t)}catch{return t}}a(K,"coerceAttrValue");function Le(e){for(let{name:t,value:r}of e.attributes){if(!Fe(t))continue;let[n,o]=y(K(le(r)));n.set=o,e._props[t]=n}}a(Le,"generateSpecialAttrSignals");function ke(e){let t=new MutationObserver(r=>{for(let n of r){if(n.type!=="attributes"||!Fe(n.attributeName))continue;let o=e._props[n.attributeName];o!=null&&o.set&&o.set(K(e.getAttribute(n.attributeName)))}});t.observe(e,{attributes:!0,attributeOldValue:!0}),e._cleanup.add(()=>t.disconnect())}a(ke,"observeAttrMutations");function Ie(e){Le(e),ke(e)}a(Ie,"initPropsAndObserve");function Re(e,t){let r=class extends HTMLElement{constructor(){super(),ie(this),this._cleanup=new Set,this._isUpdating=!1,this._props={},this.lifecycle=new re,d.currentComponent=this,this._eventIds=[],Ie(this),this.lifecycle.run("beforeMount",this),this._render()}connectedCallback(){this.lifecycle.run("mount",this)}disconnectedCallback(){this.lifecycle.run("destroy",this),this._cleanup.forEach(i=>i()),this._cleanup.clear(),this._eventIds.forEach(({type:i,id:l})=>{clearEventHandler(i,l)}),this._eventIds=[]}_render(){D(this,()=>{this.lifecycle.run("beforeUpdate",this);let i=t.call(this,this._props),{template:l,signals:s,refs:c}=typeof i=="function"?i():i||{};this.shadowRoot.hasChildNodes()||this.shadowRoot.appendChild(xe(e,l)),ye(this,s),x(this),ve(this,c),this.lifecycle.run("update",this)})}};a(r,"EsorComponent");let n=r;return customElements.define(e,n),n}a(Re,"component");function at(){let e=null;return new Proxy(()=>{},{apply:a((t,r,[n])=>e=n,"apply"),get:a((t,r)=>{var n,o;return((o=(n=e==null?void 0:e[r])==null?void 0:n.bind)==null?void 0:o.call(n,e))||(e==null?void 0:e[r])},"get"),set:a((t,r,n)=>e?(e[r]=n,!0):!1,"set")})}a(at,"useRef");function lt(e){let[t,r]=y();return E(()=>r(e())),t}a(lt,"useMemo");var X="esor-store:";a((e,t={})=>{let r=t.persist?Be(t.persist):null,[n,o]=y(r||e),i=new Set;return t.persist&&E(()=>{let l=a(s=>{if(s.key===X+t.persist)try{o(JSON.parse(s.newValue))}catch(c){N(`Failed to sync state: ${c.message}`)}},"handleStorage");return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)}),[n,{setState(l){let s=typeof l=="function"?l(n()):l;o(s),t.persist&&je(t.persist,s),i.forEach(c=>c(s))},subscribe(l){return i.add(l),()=>i.delete(l)},getState:n}]},"useStore");function Be(e){try{let t=localStorage.getItem(X+e);return t?JSON.parse(t):null}catch(t){return N(`Failed to load state: ${t.message}`),null}}a(Be,"loadFromStorage");function je(e,t){try{localStorage.setItem(X+e,JSON.stringify(t))}catch(r){N(`Failed to save state: ${r.message}`)}}a(je,"saveToStorage");Re("my-counter",e=>{const[t,r]=y(Number(e.count)||0);return Ce`
    <div>
      <p>count is ${t}</p>
      <button @click="${()=>r(t+1)}">Increment</button>
    </div>
  `});document.querySelector("#app").innerHTML=`
  <div>
    <a href="https://vite.dev" target="_blank">
      <img src="${Ve}" class="logo" alt="Vite logo" />
    </a>
    <a href="https://github.com/esorjs/esor" target="_blank">
      <img src="${qe}" class="logo esor" alt="Esor logo" />
    </a>
    
    <my-counter count="2" ></my-counter>     
  </div>
`;
